<!-- Chart -->
<section>
  <div class="row">
    <div class="col-xl-12">
      <div class="card card-h-100">
        <div class="card-body">
          <div class="align-items-center mb-4">
            <div class="d-flex flex-wrap align-items-center mb-4">
              <h5 class="title-small text--white">Transaction</h5>
              <div class="ms-auto">
                <div>
                  <button
                    type="button"
                    class="button button-primary body mr-2"
                    [class.active]="chart === '60m'"
                    (click)="updateBlockAndTxs('60m')"
                  >
                    60m
                  </button>
                  <button
                    type="button"
                    class="button button-primary body mr-2"
                    [class.active]="chart === '24h'"
                    (click)="updateBlockAndTxs('24h')"
                  >
                    24h
                  </button>
                  <button
                    type="button"
                    class="button button-primary body mr-2"
                    [class.active]="chart === '30d'"
                    (click)="updateBlockAndTxs('30d')"
                  >
                    30d
                  </button>
                  <button
                    type="button"
                    class="button button-primary body"
                    [class.active]="chart === '12M'"
                    (click)="updateBlockAndTxs('12M')"
                  >
                    12M
                  </button>
                </div>
              </div>
            </div>
            <div class="w-100" *ngIf="chartOptions">
              <div id="chart">
                <apx-chart
                  [series]="chartOptions.series"
                  [chart]="chartOptions.chart"
                  [xaxis]="chartOptions.xaxis"
                  [stroke]="chartOptions.stroke"
                  [tooltip]="chartOptions.tooltip"
                  [dataLabels]="chartOptions.dataLabels"
                >
                </apx-chart>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Cards -->
<section>
  <div class="row">
    <div class="col-xl-3 col-md-6" *ngIf="global && global.dataHeader && global.dataHeader.block_height">
      <!-- card -->
      <div class="card text--white">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-9">
            <div class="col-12">
              <span class="sub-text">Height</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <h4 class="title text-gradient fw-bold">{{ global?.dataHeader?.block_height | number }}</h4>
            <div class="body">Update 5s ago</div>
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div class="col-xl-3 col-md-6" *ngIf="global && global.dataHeader && global.dataHeader.block_time">
      <!-- card -->
      <div class="card text--white">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-9">
            <div class="col-12">
              <span class="sub-text">Block Time</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <h4 class="title text-gradient fw-bold">{{ global?.dataHeader?.block_time }}</h4>
            <div class="body">Update 5s ago</div>
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div class="col-xl-3 col-md-6" *ngIf="global && global.dataHeader && global.dataHeader.bonded_tokens">
      <!-- card -->
      <div class="card text--white">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-9">
            <div class="col-12">
              <span class="sub-text">Bonded Tokens</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <h4 class="title text-gradient fw-bold">{{ global?.dataHeader?.bonded_tokens | number }}</h4>
            <div class="body">Update 5s ago</div>
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
    <div
      class="col-xl-3 col-md-6"
      *ngIf="
        global &&
        global.dataHeader &&
        global.dataHeader.total_validator_active_num &&
        global.dataHeader.total_validator_num
      "
    >
      <!-- card -->
      <div class="card text--white">
        <!-- card body -->
        <div class="card-body">
          <div class="row mb-9">
            <div class="col-12">
              <span class="sub-text">Validators</span>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <h4 class="title text-gradient fw-bold">
              {{ global?.dataHeader?.total_validator_active_num }} /
              {{ global?.dataHeader?.total_validator_num }}
            </h4>
            <div class="body">Update 5s ago</div>
          </div>
        </div>
        <!-- end card body -->
      </div>
      <!-- end card -->
    </div>
  </div>
</section>
<!-- Tables -->
<section>
  <div class="row">
    <!-- Block -->
    <div class="col-xl-6">
      <div class="card">
        <div class="align-items-center d-flex justify-content-between px-6 py-6">
          <div class="sub-text text--white">Blocks</div>
          <button type="button" class="button button-outline" [routerLink]="'/blocks'">View more</button>
        </div>
        <div class="card-body pt-0">
          <ngx-simplebar>
            <ng-container *ngIf="dataSourceBlock; else noValues">
              <div class="table-responsive">
                <table mat-table [dataSource]="dataSourceBlock" class="aura-table">
                  <ng-container *ngFor="let template of templatesBlock; index as i">
                    <ng-container [matColumnDef]="template.matColumnDef">
                      <th mat-header-cell *matHeaderCellDef>
                        <div [innerHTML]="template.headerCellDef | translate"></div>
                      </th>
                      <td mat-cell *matCellDef="let data">
                        <div>
                          <ng-container [ngSwitch]="template.matColumnDef">
                            <div *ngSwitchCase="'timestamp'">
                              {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                            </div>
                            <div
                              *ngSwitchCase="'proposer'"
                              class="text--green cursor-pointer"
                              [routerLink]="['/validators', data.operator_address]"
                            >
                              {{ data[template.matColumnDef] }}
                            </div>
                            <div
                              *ngSwitchCase="'height'"
                              class="text--green cursor-pointer"
                              [routerLink]="['/blocks', data.height]"
                            >
                              {{ data[template.matColumnDef] }}
                            </div>
                            <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                          </ng-container>
                        </div>
                      </td>
                    </ng-container>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsBlock"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsBlock"></tr>
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell g-no-data" colspan="9999">
                      {{ 'NO DATA' | translate }}
                    </td>
                  </tr>
                </table>
              </div>
            </ng-container>
            <ng-template #noValues>
              <app-table-no-data></app-table-no-data>
            </ng-template>
          </ngx-simplebar>
        </div>
      </div>
    </div>

    <!-- Transaction -->
    <div class="col-xl-6">
      <div class="card">
        <div class="align-items-center d-flex justify-content-between px-6 py-6">
          <div class="sub-text text--white">Transaction</div>
          <button type="button" class="button button-outline" [routerLink]="'/transaction'">View more</button>
        </div>
        <div class="card-body pt-0">
          <ngx-simplebar>
            <ng-container *ngIf="dataSourceTx; else noValues">
              <div class="table-responsive">
                <table mat-table [dataSource]="dataSourceTx" class="aura-table">
                  <ng-container *ngFor="let template of templatesTx; index as i">
                    <ng-container [matColumnDef]="template.matColumnDef">
                      <th mat-header-cell *matHeaderCellDef>
                        <div [innerHTML]="template.headerCellDef | translate"></div>
                      </th>
                      <td mat-cell *matCellDef="let data">
                        <div>
                          <ng-container [ngSwitch]="template.matColumnDef">
                            <div *ngSwitchCase="'timestamp'">
                              {{ commonService.getDateValue(data[template.matColumnDef])[0] }}
                            </div>
                            <div *ngSwitchCase="'tx_hash_format'" class="text--green cursor-pointer hash-link">
                              {{ data[template.matColumnDef] }}
                            </div>
                            <div *ngSwitchCase="'height'" class="text--green cursor-pointer block-link">
                              {{ data[template.matColumnDef] }}
                            </div>
                            <div *ngSwitchCase="'type'">
                              {{ data[template.matColumnDef] }}
                            </div>
                            <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                          </ng-container>
                        </div>
                      </td>
                    </ng-container>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsTx"></tr>
                  <tr
                    mat-row
                    *matRowDef="let row; columns: displayedColumnsTx"
                    (click)="openTxsDetail($event, row)"
                  ></tr>
                  <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell g-no-data" colspan="9999">
                      {{ 'NO DATA' | translate }}
                    </td>
                  </tr>
                </table>
              </div>
            </ng-container>
            <ng-template #noValues>
              <app-table-no-data></app-table-no-data>
            </ng-template>
          </ngx-simplebar>
        </div>
      </div>
    </div>
  </div>
</section>
