<div class="" *ngIf="{ value: breakpoint$ | async } as breakpoint">
  <div class="d-lg-flex justify-content-between box-title-register mb-5 pb-4">
    <p class="title-medium mb-2 text--white fw-bold">Type Smart Contract</p>
    <button class="ml-3 button button-outline button-outline__in-card">
      <img src="assets/icons/icons-svg/color/plus.svg" alt="" width="24" height="24" />
      <span class="text-gradient">Register Contract</span>
    </button>
  </div>
  <div class="d-lg-flex justify-content-between">
    <div>
      <div class="text--white-2 body">
        Before a user wants to register a type contract for a Code ID, the user has to claim ownership of the Code ID
        successfully
      </div>
      <div class="body text--neutrals-4">{{ pageData?.length }} contract registered</div>
    </div>
    <form class="aura-form single-input-field search-form mt-4">
      <div class="input-group small-input" [class.textbox_search]="breakpoint.value.matches">
        <input
          type="text"
          class="form-control"
          placeholder="Search for Code ID"
          [(ngModel)]="textSearch"
          [maxLength]="maxLengthSearch"
          (keyup)="searchToken()"
          (keyup.enter)="handleLink()"
          name="search"
          autocomplete="off" />
        <button
          type="submit"
          class="btn-search {{ textSearch && textSearch?.length > 0 ? 'd-none' : '' }}"
          (click)="searchToken()">
          <img src="../../../assets/icons/icons-svg/basic/search.svg" alt="" width="24" height="24" />
        </button>
        <button
          type="reset"
          class="btn-reset {{ !textSearch || (textSearch && textSearch?.length === 0) ? 'd-none' : '' }}"
          (click)="textSearch = ''; searchToken()">
          <img src="../../../assets/icons/icons-svg/basic/close-circle.svg" alt="" width="24" height="24" />
        </button>
      </div>
      <ng-container *ngIf="textSearch?.length > 0">
        <div class="box-search-data text-white">
          <ng-container *ngIf="filterSearchData?.length === 0">
            <span> There are no matching contracts </span>
          </ng-container>
          <ng-container *ngIf="filterSearchData && filterSearchData.length > 0">
            <div class="txt-title-search">Contracts</div>
            <ng-container *ngFor="let item of filterSearchData">
              <div class="d-flex p-3 cursor-pointer" [routerLink]="['/contracts', item.contract_address]">
                <img src="assets/images/icons/token-logo.png" class="logo-token" />
                <div class="ml-3">
                  <div class="d-flex align-items-center">
                    <span class="text-clamp">{{ item.contract_name }}</span>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
        </div>
      </ng-container>
    </form>
  </div>
</div>

<section>
  <div class="card mt-4 mt-lg-6">
    <div class="card-body">
      <div class="table-responsive aura-table-contain">
        <table mat-table matSort [dataSource]="mockData" class="aura-table">
          <ng-container *ngFor="let template of templates; index as i">
            <ng-container [matColumnDef]="template.matColumnDef">
              <th mat-header-cell *matHeaderCellDef>
                <div [innerHTML]="template.headerCellDef | translate" [style.width]="'180px'"></div>
              </th>
              <ng-container *ngIf="pageData?.length > 0">
                <td mat-cell *matCellDef="let data">
                  <ng-container [ngSwitch]="template.matColumnDef">
                    <ng-container *ngSwitchCase="'codeID'">
                      <a
                        *ngIf="data[template.matColumnDef]"
                        class="text--green cursor-pointer hash-link"
                        [routerLink]="['/contracts/', data['codeID']]">
                        {{ data[template.matColumnDef] }}
                      </a>
                    </ng-container>
                    <ng-container *ngSwitchCase="'time'">
                      {{ data['time'] }}
                    </ng-container>
                    <ng-container *ngSwitchCase="'result'">
                      <div
                        [ngStyle]="{
                          color:
                            data['result'] === 'TBD'
                              ? '#5E84E6'
                              : data['result'] === 'Incorrect'
                              ? '#E65E5E'
                              : '#5EE69D'
                        }">
                        {{ data[template.matColumnDef] }}
                      </div>
                    </ng-container>
                    <ng-container *ngSwitchCase="'action'">
                      <div class="d-flex align-items-center">
                        <button
                          type="button"
                          class="button button-outline button-outline__in-card ml-auto"
                          (click)="viewPopupDetail(modalManage, data['validator_address'])">
                          <img src="assets/icons/icons-svg/color/edit.svg" alt="" width="20" height="20" />
                          <span class="text-gradient ml-1">Edit</span>
                        </button>
                      </div>
                    </ng-container>
                    <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                  </ng-container>
                </td>
              </ng-container>
            </ng-container>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell g-no-data" colspan="9999">
              <div class="d-flex justify-content-center align-items-center m-5 p-5">
                <img src="/assets/icons/icons-svg/white/info.svg" alt="" width="24" height="24" class="mr-2" />
                You have yet to register any type contract
              </div>
            </td>
          </tr>
        </table>
      </div>
      <app-paginator
        [length]="pageData.length"
        [pageSize]="pageData.pageSize"
        (paginator)="paginatorEmit($event)"
        (pageEvent)="pageEvent($event)">
      </app-paginator>
    </div>
  </div>
</section>

<div class="col-lg-6">
  <ng-template #modalManage let-modal (clickOutside)="closeDialog(modal)">
    <div class="aura-form d-flex row p-3">
      <div class="col-12 d-flex justify-content-between px-0 mb-4">
        <span>Register Type Contract</span>
        <img src="/assets/icons/icons-svg/white/close.svg" alt="" width="14" height="14" class="mr-2 cursor-pointer" />
      </div>
      <div class="box-body-register col-12">
        <p class="input-require">Code ID</p>
        <div class="box-input">
          <input class="form-check-input col-12 mb-4" [type]="'string'" placeholder="Enter a Code ID" />
        </div>
        <p class="small-text text--neutrals-4">Enter a Code ID that you owned/ created.</p>
        <p class="body input-require">Type Contract</p>
        <div class="box-input">
          <input class="form-check-input col-12 mb-4" [type]="'string'" placeholder="Enter a Type Contract" />
        </div>
      </div>
      <div class="d-flex align-items-center justify-content-end w-100 mt-4">
        <button type="button" class="button body mr-2 text--white">Close</button>
        <button type="button" class="button body button-outline">
          <span class="text-gradient">Register</span>
        </button>
      </div>
    </div>
  </ng-template>
</div>
