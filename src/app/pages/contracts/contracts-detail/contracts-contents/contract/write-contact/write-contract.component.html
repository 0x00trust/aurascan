<div class="d-flex justify-content-between align-items-center">
  <div class="my-3 small-text">
    <button
      (click)="connectWallet()"
      class="button button-pill button--xs button-outline button-outline__in-card"
      *ngIf="!isConnectedWallet">
      <span class="icon-connect"></span>
      <span class="fw-semibold">Connect to Web3</span>
    </button>
    <button
      [routerLink]="['/account/', walletAddress]"
      class="button button-pill button--xs button-outline button-outline__in-card"
      *ngIf="isConnectedWallet">
      <span class="icon-connect connected"></span>
      <span class="fw-semibold">Connected to Web3</span>
    </button>
  </div>
  <div class="body-03 d-flex align-items-center">
    <span class="cursor-pointer text--primary" (click)="expandMenu()">
      <ng-container *ngIf="!isExpand">Expand all</ng-container>
      <ng-container *ngIf="isExpand">Collapse all</ng-container>
    </span>
    <div class="divider divider-vertical"></div>
    <span class="cursor-pointer text--primary" (click)="reloadData()">Reset</span>
  </div>
</div>

<div class="box-content text--white mt-3">
  <ng-container *ngFor="let writeContract of jsonWriteContract?.oneOf; index as i">
    <!-- skip logo function -->
    <ng-container *ngIf="!writeContract?.required?.toString().includes('_logo')">
      <mat-expansion-panel hideToggle>
        <mat-expansion-panel-header class="content-contract">
          <mat-panel-title class="item-content"> {{ i + 1 }}. {{ writeContract?.required }} </mat-panel-title>
          <mat-panel-description> </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="d-flex row p-3">
          <ng-container *ngIf="writeContract?.properties[writeContract?.required[0]]?.hasOwnProperty('properties')">
            <ng-container
              *ngFor="
                let item of objectKeys(writeContract?.properties[writeContract?.required[0]]?.properties);
                index as idx
              ">
              <p
                class="px-0 text--greyscale-1"
                [class.input-require]="
                  writeContract?.properties[writeContract?.required[0]]?.hasOwnProperty('required')
                ">
                {{ item }} ({{
                  writeContract?.properties[writeContract?.required[0]]?.properties[item]?.type
                    ? writeContract?.properties[writeContract?.required[0]]?.properties[item]?.type
                    : objectRef(writeContract?.properties[writeContract?.required[0]]?.properties[item].$ref, true)
                }})
              </p>
              <input
                class="form-check-input {{ writeContract?.required }} {{ item }} col-12 mb-4"
                [class.input-require]="
                  writeContract?.properties[writeContract?.required[0]]?.hasOwnProperty('required')
                "
                [type]="
                  writeContract?.properties[writeContract?.required[0]]?.properties[item]?.type === 'integer'
                    ? 'number'
                    : 'string'
                "
                (keyup)="resetCheck()"
                [class.error-null]="
                  writeContract?.properties[writeContract.required[0]]?.checkErr &&
                  writeContract?.properties[writeContract.required[0]]?.checkErr[item] &&
                  errorInput &&
                  currentFrom === i
                "
                placeholder="{{ item }} ({{
                  writeContract?.properties[writeContract?.required[0]]?.properties[item]?.type
                    ? writeContract?.properties[writeContract?.required[0]]?.properties[item]?.type
                    : objectRef(writeContract?.properties[writeContract?.required[0]]?.properties[item].$ref, true)
                }})" />
            </ng-container>
          </ng-container>
          <!-- Check has ref property -->
          <ng-container *ngIf="writeContract?.properties[writeContract?.required[0]]?.hasOwnProperty('$ref')">
            <ng-container
              *ngFor="
                let item of objectRef(
                  writeContract?.properties[writeContract?.required[0]]?.$ref,
                  false,
                  writeContract
                );
                index as idx
              ">
              <p
                class="px-0 text--greyscale-1"
                [class.input-require]="checkRequire(item, objDefine[writeContract?.required])">
                {{ item }} ({{
                  jsonWriteContract[objDefine[writeContract?.required]?.key[0]][
                    objDefine[writeContract?.required]?.key[1]
                  ].properties[item]?.type ||
                    jsonWriteContract[objDefine[writeContract?.required]?.key[0]][
                      objDefine[writeContract?.required]?.key[1]
                    ].properties[item]?.$ref ||
                    'any'
                }})
              </p>
              <input
                class="form-check-input {{ writeContract?.required }} {{ item }} col-12 mb-4"
                [class.input-require]="checkRequire(item, objDefine[writeContract?.required])"
                [type]="
                  jsonWriteContract[objDefine[writeContract?.required]?.key[0]][
                    objDefine[writeContract?.required]?.key[1]
                  ].properties[item]?.type === 'integer'
                    ? 'number'
                    : 'string'
                "
                (keyup)="resetCheck()"
                [class.error-null]="
                  writeContract?.properties[writeContract.required[0]]?.checkErr &&
                  writeContract?.properties[writeContract.required[0]]?.checkErr[item] &&
                  errorInput &&
                  currentFrom === i
                "
                placeholder="{{ item }} ({{
                  jsonWriteContract[objDefine[writeContract?.required]?.key[0]][
                    objDefine[writeContract?.required]?.key[1]
                  ].properties[item]?.type ||
                    jsonWriteContract[objDefine[writeContract?.required]?.key[0]][
                      objDefine[writeContract?.required]?.key[1]
                    ].properties[item]?.$ref ||
                    'any'
                }})" />
            </ng-container>
          </ng-container>
          <div class="px-0">
            <button
              class="button button-pill button--sm button-outline  button-outline--gradient button-outline__in-card"
              [disabled]="errorInput && currentFrom === i"
              type="button"
              (click)="executeSmartContract(writeContract?.required[0], i)">
              <span>Write</span>
            </button>
          </div>
        </div>
      </mat-expansion-panel>
    </ng-container>
  </ng-container>
</div>
