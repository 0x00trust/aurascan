<app-pagetitle title="Details for Block #{{ id || item?.height }}"></app-pagetitle>
<div class="card text--white">
  <div class="card-header title-small py-6 px-6">Header</div>
  <div class="card-body body">
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Chain Id</p>
      </div>
      <div class="col-6">{{ item?.chainid }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Height</p>
      </div>
      <div class="col-6">{{ item?.height }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Block Time</p>
      </div>
      <div class="col-6">{{ item?.timestamp | calDate }} ago ({{ dateFormat }})</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Block Hash</p>
      </div>
      <div class="col-6">{{ item?.block_hash }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Number of Tx</p>
      </div>
      <div class="col-6">{{ item?.num_txs }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Gas (used / wanted)</p>
      </div>
      <div class="col-6">{{ item?.gas_used | number }} / {{ item?.gas_wanted | number }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Block Round</p>
      </div>
      <div class="col-6">{{ item?.round | number }}</div>
    </div>
    <div class="row mb-3">
      <div class="col-3">
        <p class="card-text fw-bold">Proposer</p>
      </div>
      <div class="col-6">
        <a class="text--green" routerLink="/validators/{{ item?.operator_address }}">{{ item?.proposer }}</a>
      </div>
    </div>
  </div>
</div>
<div class="card text--white">
  <div class="card-header title-small py-6 px-6">Transactions</div>
  <div class="card-body body">
    <ng-container *ngIf="length > 0; else noValues">
      <div class="table-responsive">
        <table mat-table [dataSource]="dataSource" class="aura-table" matSort>
          <ng-container *ngFor="let template of templates; index as i">
            <ng-container [matColumnDef]="template.matColumnDef">
              <th mat-header-cell *matHeaderCellDef mat-sort-header class="none-border-top">
                <div [innerHTML]="template.headerCellDef | translate"></div>
              </th>

              <td mat-cell *matCellDef="let data">
                <div>
                  <ng-container [ngSwitch]="template.matColumnDef">
                    <div *ngSwitchCase="'timestamp'">{{ data[template.matColumnDef] | calDate }} ago</div>
                    <div *ngSwitchCase="'tx_hash_format'" class="g-blue cursor-pointer hash-link">
                      {{ data[template.matColumnDef] }}
                    </div>
                    <div *ngSwitchCase="'height'" class="g-blue cursor-pointer block-link">
                      {{ data[template.matColumnDef] }}
                    </div>
                    <div *ngSwitchCase="'type'" class="g-type">
                      {{ data[template.matColumnDef] }}
                    </div>
                    <div *ngSwitchCase="'status'">
                      <img
                              [src]="
                        data[template.matColumnDef] === statusTransaction.Success
                          ? 'assets/images/icons/success.svg'
                          : 'assets/images/icons/fail.svg'
                      "
                              alt=""
                      />
                      {{ data[template.matColumnDef] }}
                    </div>
                    <div *ngSwitchCase="'fee'">
                      {{ data[template.matColumnDef] }} <span class="g-purple">{{ global.stableToken }}</span>
                    </div>
                    <div *ngSwitchCase="'amount'">
                      <ng-container *ngIf="data[template.matColumnDef] > 0">
                        {{ data[template.matColumnDef] | number }} <span class="g-purple">{{ global.stableToken }}</span>
                      </ng-container>
                      <ng-container *ngIf="data[template.matColumnDef] == 0"> - </ng-container>
                    </div>
                    <div *ngSwitchDefault>{{ data[template.matColumnDef] }}</div>
                  </ng-container>
                </div>
              </td>
            </ng-container>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns" (click)="openTxsDetail($event, row)"></tr>
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell g-no-data" colspan="9999">
              {{ 'NO DATA' | translate }}
            </td>
          </tr>
        </table>
      </div>
    </ng-container>

    <ng-template #noValues>
      <app-table-no-data></app-table-no-data>
    </ng-template>
  </div>
</div>
