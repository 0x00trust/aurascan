<div class="card" *ngIf="proposalDetail">
  <div class="card-header bg-transparent border-bottom text-uppercase fw-bold">
    <div class="d-flex justify-content-between">
      <div class="card__title">
        <div>#{{ proposalId }}</div>
        <h2>{{ proposalDetail.pro_title }}</h2>
      </div>
      <div class="card__status">
        <button
          mat-flat-button
          color="primary"
          *ngIf="proposalDetail.pro_status != 'PROPOSAL_STATUS_DEPOSIT_PERIOD'"
          [disabled]="proposalDetail.pro_status != 'PROPOSAL_STATUS_VOTING_PERIOD'"
          (click)="openVoteDialog(proposalDetail.pro_id, proposalDetail.pro_title)"
        >
          {{ proposalDetail.pro_status != 'PROPOSAL_STATUS_VOTING_PERIOD' ? 'Voting Ended' : 'Vote' }}
        </button>
        <div
          class="TEST aura-status aura-status--has-elevation text-uppercase {{
            getStatus(proposalDetail?.pro_status)?.class
          }}"
        >
          <span class="status">{{ getStatus(proposalDetail.pro_status).value }}</span>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <div class="card__info">
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Proposer</div>
        <div class="col-12 col-md-10 info" *ngIf="proposalDetail.pro_proposer">
          <a href="/account/{{ proposalDetail.pro_proposer }}">{{ proposalDetail.pro_proposer }}</a>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Initial Deposit</div>
        <div class="col-12 col-md-10 info">
          <span class="g-purple">{{ global.stableToken }}</span>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Total Deposit</div>
        <div class="col-12 col-md-10 info">
          {{ proposalDetail.pro_total_deposits | number: '1.6' }}
          <span class="g-purple"> {{ global.stableToken }}</span>
        </div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Voting Start</div>
        <div class="col-12 col-md-10 info">{{ proposalDetail.pro_voting_start_time }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Voting End</div>
        <div class="col-12 col-md-10 info">{{ proposalDetail.pro_voting_end_time }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Type</div>
        <div class="col-12 col-md-10 info">{{ proposalDetail.pro_type }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Submit Time</div>
        <div class="col-12 col-md-10 info">{{ proposalDetail.pro_submit_time }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Deposit End Time</div>
        <div class="col-12 col-md-10 info">{{ proposalDetail.pro_deposit_end_time }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-12 col-md-2 title">Details</div>
        <div class="col-12 col-md-10 info">
          <div class="editorial-container" [innerText]="proposalDetail.pro_description"></div>
        </div>
      </div>
      <!-- <div class="row mb-3">
        <div class="col-12 col-md-2 title">Request Amount</div>
        <div class="col-12 col-md-10 info">1,000.000000 <span class="g-purple">ATOM</span></div>
      </div> -->
      <div class="proposal__summary-total">
        <div class="flex-md-row-reverse justify-content-between">
          <!-- <div class="text-md-end mb-2 mb-md-0">
            <div class="d-sm-flex">
              <div><b>Current Turnout :</b>{{proposalDetail.pro_turnout}}</div>
              <div class="spacer-custom my-2 my-sm-0"><b>Quorum :</b> 40.00%</div>
            </div>
            <small>59 M of 185 M has voted</small>
          </div> -->
          <div>
            <b>Total : </b>
            <!-- <span>{{ proposalDetail.pro_total_vote[0] | number}}</span>
            <span class="decimal">.{{ proposalDetail.pro_total_vote[1] | mask: '000000' }}</span> -->
            {{ proposalDetail.pro_total_vote | number: '1.6' }}
            <span class="g-purple"> {{ global.stableToken }}</span>
          </div>
        </div>
        <div class="vote-bar mt-3">
          <ul>
            <li
              class="primary"
              [style.width]="proposalDetail.pro_vote_yes_bar + '%'"
              matTooltip="Yes {{ proposalDetail.pro_vote_yes_bar }}%"
              [matTooltipPosition]="'above'"
            ></li>
            <li
              class="danger"
              [style.width]="proposalDetail.pro_vote_no_bar + '%'"
              matTooltip="No {{ proposalDetail.pro_vote_no_bar }}%"
              [matTooltipPosition]="'above'"
            ></li>
            <li
              class="info"
              [style.width]="proposalDetail.pro_vote_no_with_veto_bar + '%'"
              matTooltip="No with veto {{ proposalDetail.pro_vote_no_with_veto_bar }}%"
              [matTooltipPosition]="'above'"
            ></li>
            <li
              class="secondary"
              [style.width]="proposalDetail.pro_vote_abstain_bar + '%'"
              matTooltip="Abstain {{ proposalDetail.pro_vote_abstain_bar }}%"
              [matTooltipPosition]="'above'"
            ></li>
          </ul>
        </div>
        <div class="vote-legend">
          <ul>
            <li data-style="primary">
              <p class="item item-label">Yes</p>
              <p class="item item-percent">
                <!-- <span>{{ this.proposalDetail.yesPercent[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.yesPercent[1] }}%</span> -->
                {{ this.proposalDetail.yesPercent | number: '1.2' }}%
              </p>
              <p class="item item-amount">
                <!-- <span>{{ this.proposalDetail.pro_votes_yes[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.pro_votes_yes[1] }}</span> -->
                {{ this.proposalDetail.pro_votes_yes || 0 | number: '1.6' }}
                <span class="g-purple">{{ global.stableToken }}</span>
              </p>
            </li>
            <li data-style="danger">
              <p class="item item-label">No</p>
              <p class="item item-percent">
                <!-- <span>{{ this.proposalDetail.noPercent[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.noPercent[1]}}%</span> -->
                {{ this.proposalDetail.noPercent | number: '1.2' }}%
              </p>
              <p class="item item-amount">
                <!-- <span>{{ this.proposalDetail.pro_votes_no[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.pro_votes_no[1] }}</span> -->
                {{ this.proposalDetail.pro_votes_no || 0 | number: '1.6' }}
                <span class="g-purple">{{ global.stableToken }}</span>
              </p>
            </li>
            <li data-style="info">
              <p class="item item-label">No with veto</p>
              <p class="item item-percent">
                <!-- <span>{{ this.proposalDetail.noWithVetoPercent[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.noWithVetoPercent[1] | mask: '00' }}%</span> -->
                {{ this.proposalDetail.noWithVetoPercent | number: '1.2' }}%
              </p>
              <p class="item item-amount">
                <!-- <span>{{ this.proposalDetail.pro_votes_no_with_veto[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.pro_votes_no_with_veto[1] }}</span> -->
                {{ this.proposalDetail.pro_votes_no_with_veto || 0 | number: '1.6' }}
                <span class="g-purple">{{ global.stableToken }}</span>
              </p>
            </li>
            <li data-style="secondary">
              <p class="item item-label">Abstain</p>
              <p class="item item-percent">
                <!-- <span>{{ this.proposalDetail.abstainPercent[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.abstainPercent[1] | mask: '00' }}%</span> -->
                {{ this.proposalDetail.abstainPercent | number: '1.2' }}%
              </p>
              <p class="item item-amount">
                <!-- <span>{{ this.proposalDetail.pro_votes_abstain[0] }}</span>
                <span class="decimal">.{{ this.proposalDetail.pro_votes_abstain[1] }}</span> -->
                {{ this.proposalDetail.pro_votes_abstain || 0 | number: '1.6' }}
                <span class="g-purple">{{ global.stableToken }}</span>
              </p>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
